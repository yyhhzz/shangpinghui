{"ast":null,"code":"import { mapState } from \"_vuex@3.6.2@vuex\";\nexport default {\n  name: \"Trade\",\n\n  data() {\n    return {\n      msg: \"\",\n      orderId: ''\n    };\n  },\n\n  mounted() {\n    this.$store.dispatch(\"getUserAddress\");\n    this.$store.dispatch(\"getOrderInfo\");\n  },\n\n  computed: { ...mapState({\n      addressInfo: state => state.trade.address,\n      orderInfo: state => state.trade.orderInfo\n    }),\n\n    // 默认用户收件信息\n    defaultUser() {\n      return this.addressInfo.find(item => item.isDefault == \"1\") || {};\n    }\n\n  },\n  methods: {\n    // 修改默认地址\n    changeDefaultAddress(address, addressInfo) {\n      addressInfo.forEach(item => item.isDefault = \"0\");\n      address.isDefault = \"1\";\n    },\n\n    // 提交订单（未使用vuex）\n    async submitOrder() {\n      // 带的参数\n      let {\n        tradeNo\n      } = this.orderInfo;\n      let data = {\n        consignee: this.defaultUser.consignee,\n        //付款人的名字\n        consigneeTel: this.defaultUser.phoneNum,\n        //付款人的手机号\n        deliveryAddress: this.defaultUser.fullAddress,\n        //付款人收货地址\n        paymentWay: \"ONLINE\",\n        //支付方式都是在线支付\n        orderComment: this.msg,\n        //买家留言\n        orderDetailList: this.orderInfo.detailArrayList //购物车商品信息\n\n      };\n      let result = await this.$API.reqSubmitOrder(tradeNo, data);\n      console.log(tradeNo, data);\n      console.log(result);\n\n      if (result.code == 200) {\n        this.orderId = result.data;\n        this.$router.push('/pay?orderId=' + this.orderId);\n      } else {\n        alert(result.message);\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}