{"ast":null,"code":"export default {\n  name: \"Register\",\n\n  data() {\n    return {\n      phone: \"\",\n      //手机号\n      code: \"\",\n      // 验证码\n      password: \"\",\n      // 密码\n      password1: \"\",\n      // 确认密码\n      agree: true //是否同意\n\n    };\n  },\n\n  methods: {\n    //获取验证码按钮的回调\n    async getCode() {\n      const {\n        phone\n      } = this; //先不处理表单验证业务\n\n      if (phone) {\n        try {\n          //获取验证码成功\n          await this.$store.dispatch(\"getCode\", phone); //修改VC身上的code属性,让验证码自动展示\n\n          this.code = this.$store.state.user.code;\n        } catch (error) {}\n      }\n    },\n\n    //用户注册\n    async register() {\n      const success = await this.$validator.validateAll(); //全部表单验证通过\n      // 所有表单验证成功才能注册\n\n      if (success) {\n        //解构出参数\n        const {\n          phone,\n          code,\n          password,\n          password1\n        } = this; //通知vuex发请求，进行用户的注册\n\n        try {\n          //注册成功\n          await this.$store.dispatch(\"userRegister\", {\n            phone,\n            code,\n            password\n          }); //让用户跳转到登录页面进行登录\n\n          this.$router.push('/login');\n        } catch (error) {\n          //注册失败\n          alert(error.message);\n        }\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}