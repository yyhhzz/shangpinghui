{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*!\n * Vue-Lazyload.js v3.0.0-rc.1\n * (c) 2022 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\nimport { nextTick, reactive, defineComponent, ref, computed, onMounted, onUnmounted, createVNode, watch } from 'vue';\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar assignSymbols$1 = createCommonjsModule(function (module) {\n  const toString = Object.prototype.toString;\n  const isEnumerable = Object.prototype.propertyIsEnumerable;\n  const getSymbols = Object.getOwnPropertySymbols;\n\n  module.exports = (target, ...args) => {\n    if (!isObject(target)) {\n      throw new TypeError('expected the first argument to be an object');\n    }\n\n    if (args.length === 0 || typeof Symbol !== 'function' || typeof getSymbols !== 'function') {\n      return target;\n    }\n\n    for (let arg of args) {\n      let names = getSymbols(arg);\n\n      for (let key of names) {\n        if (isEnumerable.call(arg, key)) {\n          target[key] = arg[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]' || Array.isArray(val);\n  }\n});\nvar assignSymbols$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': assignSymbols$1,\n  __moduleExports: assignSymbols$1\n});\nvar assignSymbols = assignSymbols$2 && assignSymbols$1 || assignSymbols$2;\nvar assignDeep = createCommonjsModule(function (module) {\n  const toString = Object.prototype.toString;\n\n  const isValidKey = key => {\n    return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n  };\n\n  const assign = module.exports = (target, ...args) => {\n    let i = 0;\n    if (isPrimitive(target)) target = args[i++];\n    if (!target) target = {};\n\n    for (; i < args.length; i++) {\n      if (isObject(args[i])) {\n        for (const key of Object.keys(args[i])) {\n          if (isValidKey(key)) {\n            if (isObject(target[key]) && isObject(args[i][key])) {\n              assign(target[key], args[i][key]);\n            } else {\n              target[key] = args[i][key];\n            }\n          }\n        }\n\n        assignSymbols(target, args[i]);\n      }\n    }\n\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]';\n  }\n\n  function isPrimitive(val) {\n    return typeof val === 'object' ? val === null : typeof val !== 'function';\n  }\n});\nconst inBrowser = typeof window !== 'undefined' && window !== null;\nconst hasIntersectionObserver = checkIntersectionObserver();\n\nfunction checkIntersectionObserver() {\n  if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\n    if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get: function () {\n          return this.intersectionRatio > 0;\n        }\n      });\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nconst modeType = {\n  event: 'event',\n  observer: 'observer'\n};\n\nfunction remove(arr, item) {\n  if (!arr.length) return;\n  const index = arr.indexOf(item);\n  if (index > -1) return arr.splice(index, 1);\n}\n\nfunction getBestSelectionFromSrcset(el, scale) {\n  if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return '';\n  let options = el.getAttribute('data-srcset').trim().split(',');\n  const result = [];\n  const container = el.parentNode;\n  const containerWidth = container.offsetWidth * scale;\n  let spaceIndex;\n  let tmpSrc;\n  let tmpWidth;\n  options.forEach(item => {\n    item = item.trim();\n    spaceIndex = item.lastIndexOf(' ');\n\n    if (spaceIndex === -1) {\n      tmpSrc = item;\n      tmpWidth = 99999;\n    } else {\n      tmpSrc = item.substr(0, spaceIndex);\n      tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n    }\n\n    result.push([tmpWidth, tmpSrc]);\n  });\n  result.sort((a, b) => {\n    if (a[0] < b[0]) {\n      return 1;\n    }\n\n    if (a[0] > b[0]) {\n      return -1;\n    }\n\n    if (a[0] === b[0]) {\n      if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n        return 1;\n      }\n\n      if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n        return -1;\n      }\n    }\n\n    return 0;\n  });\n  let bestSelectedSrc = '';\n  let tmpOption;\n\n  for (let i = 0; i < result.length; i++) {\n    tmpOption = result[i];\n    bestSelectedSrc = tmpOption[1];\n    const next = result[i + 1];\n\n    if (next && next[0] < containerWidth) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    } else if (!next) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    }\n  }\n\n  return bestSelectedSrc;\n}\n\nconst getDPR = (scale = 1) => inBrowser ? window.devicePixelRatio || scale : scale; // https://developers.google.com/speed/webp/faq#how_can_i_detect_browser_support_using_javascript\n\n\nfunction supportWebp() {\n  if (!inBrowser) return false;\n  let support = true;\n\n  function checkWebpFeature(feature, callback) {\n    const kTestImages = {\n      lossy: 'UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA',\n      lossless: 'UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==',\n      alpha: 'UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==',\n      animation: 'UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA'\n    };\n    const img = new Image();\n\n    img.onload = function () {\n      const result = img.width > 0 && img.height > 0;\n      callback(result);\n    };\n\n    img.onerror = function () {\n      // eslint-disable-next-line node/no-callback-literal\n      callback(false);\n    };\n\n    img.src = 'data:image/webp;base64,' + kTestImages[feature];\n  }\n\n  checkWebpFeature('lossy', isSupported => {\n    support = isSupported;\n  });\n  checkWebpFeature('lossless', isSupported => {\n    support = isSupported;\n  });\n  checkWebpFeature('alpha', isSupported => {\n    support = isSupported;\n  });\n  checkWebpFeature('animation', isSupported => {\n    support = isSupported;\n  });\n  return support;\n}\n\nfunction throttle(action, delay) {\n  let timeout = null;\n  let lastRun = 0;\n  return function () {\n    if (timeout) {\n      return;\n    }\n\n    const elapsed = Date.now() - lastRun; // @ts-ignore\n\n    const context = this;\n    const args = arguments;\n\n    const runCallback = function () {\n      lastRun = Date.now();\n      timeout = false;\n      action.apply(context, args);\n    };\n\n    if (elapsed >= delay) {\n      runCallback();\n    } else {\n      timeout = setTimeout(runCallback, delay);\n    }\n  };\n}\n\nfunction testSupportsPassive() {\n  if (!inBrowser) return false;\n  let support = false;\n\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        support = true;\n      }\n    });\n    window.addEventListener('test', noop, opts);\n  } catch (e) {}\n\n  return support;\n}\n\nconst supportsPassive = testSupportsPassive();\nconst _ = {\n  on(el, type, func, capture = false) {\n    if (supportsPassive) {\n      el.addEventListener(type, func, {\n        capture: capture,\n        passive: true\n      });\n    } else {\n      el.addEventListener(type, func, capture);\n    }\n  },\n\n  off(el, type, func, capture = false) {\n    el.removeEventListener(type, func, capture);\n  }\n\n};\n\nconst loadImageAsync = (item, resolve, reject) => {\n  let image = new Image();\n\n  if (!item || !item.src) {\n    const err = new Error('image src is required');\n    return reject(err);\n  }\n\n  if (item.cors) {\n    image.crossOrigin = item.cors;\n  }\n\n  image.src = item.src;\n\n  image.onload = function () {\n    resolve({\n      naturalHeight: image.naturalHeight,\n      naturalWidth: image.naturalWidth,\n      src: image.src\n    });\n    image = null;\n  };\n\n  image.onerror = function (e) {\n    reject(e);\n  };\n}; // keyof CSSStyleDeclaration\n\n\nconst style = (el, prop) => {\n  return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\n\nconst overflow = el => {\n  return style(el, 'overflow') + style(el, 'overflowY') + style(el, 'overflowX');\n};\n\nconst scrollParent = el => {\n  if (!inBrowser) return;\n\n  if (!(el instanceof Element)) {\n    return window;\n  }\n\n  let parent = el;\n\n  while (parent) {\n    if (parent === document.body || parent === document.documentElement) {\n      break;\n    }\n\n    if (!parent.parentNode) {\n      break;\n    }\n\n    if (/(scroll|auto)/.test(overflow(parent))) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return window;\n};\n\nfunction noop() {}\n\nclass ImageCache {\n  constructor(max) {\n    this.max = max || 100;\n    this._caches = [];\n  }\n\n  has(key) {\n    return this._caches.indexOf(key) > -1;\n  }\n\n  add(key) {\n    if (this.has(key)) return;\n\n    this._caches.push(key);\n\n    if (this._caches.length > this.max) {\n      this.free();\n    }\n  }\n\n  free() {\n    this._caches.shift();\n  }\n\n} // el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\n\n\nclass ReactiveListener {\n  constructor(el, src, error, loading, bindType, $parent, options, cors, elRenderer, imageCache) {\n    this.el = el;\n    this.src = src;\n    this.error = error;\n    this.loading = loading;\n    this.bindType = bindType;\n    this.attempt = 0;\n    this.cors = cors;\n    this.naturalHeight = 0;\n    this.naturalWidth = 0;\n    this.options = options;\n    this.rect = {};\n    this.$parent = $parent;\n    this.elRenderer = elRenderer;\n    this._imageCache = imageCache;\n    this.performanceData = {\n      init: Date.now(),\n      loadStart: 0,\n      loadEnd: 0\n    };\n    this.filter();\n    this.initState();\n    this.render('loading', false);\n  }\n  /*\r\n   * init listener state\r\n   * @return\r\n   */\n\n\n  initState() {\n    if ('dataset' in this.el) {\n      this.el.dataset.src = this.src;\n    } else {\n      this.el.setAttribute('data-src', this.src);\n    }\n\n    this.state = {\n      loading: false,\n      error: false,\n      loaded: false,\n      rendered: false\n    };\n  }\n  /*\r\n   * record performance\r\n   * @return\r\n   */\n\n\n  record(event) {\n    this.performanceData[event] = Date.now();\n  }\n  /*\r\n   * update image listener data\r\n   * @param  {String} image uri\r\n   * @param  {String} loading image uri\r\n   * @param  {String} error image uri\r\n   * @return\r\n   */\n\n\n  update(option) {\n    const oldSrc = this.src;\n    this.src = option.src;\n    this.loading = option.loading;\n    this.error = option.error;\n    this.filter();\n\n    if (oldSrc !== this.src) {\n      this.attempt = 0;\n      this.initState();\n    }\n  }\n  /*\r\n   * get el node rect\r\n   * @return\r\n   */\n\n\n  getRect() {\n    this.rect = this.el.getBoundingClientRect();\n  }\n  /*\r\n   * check el is in view\r\n   * @return {Boolean} el is in view\r\n   */\n\n\n  checkInView() {\n    this.getRect();\n    return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n  }\n  /*\r\n   * listener filter\r\n   */\n\n\n  filter() {\n    for (const key in this.options.filter) {\n      this.options.filter[key](this, this.options);\n    }\n  }\n  /*\r\n   * render loading first\r\n   * @params cb:Function\r\n   * @return\r\n   */\n\n\n  renderLoading(cb) {\n    this.state.loading = true;\n    loadImageAsync({\n      src: this.loading,\n      cors: this.cors\n    }, () => {\n      this.render('loading', false);\n      this.state.loading = false;\n      cb();\n    }, () => {\n      // handler `loading image` load failed\n      cb();\n      this.state.loading = false;\n      if (!this.options.silent) console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);\n    });\n  }\n  /*\r\n   * try load image and  render it\r\n   * @return\r\n   */\n\n\n  load(onFinish = noop) {\n    if (this.attempt > this.options.attempt - 1 && this.state.error) {\n      if (!this.options.silent) console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`);\n      onFinish();\n      return;\n    }\n\n    if (this.state.rendered && this.state.loaded) return;\n\n    if (this._imageCache.has(this.src)) {\n      this.state.loaded = true;\n      this.render('loaded', true);\n      this.state.rendered = true;\n      return onFinish();\n    }\n\n    this.renderLoading(() => {\n      this.attempt++;\n      this.options.adapter.beforeLoad && this.options.adapter.beforeLoad(this, this.options);\n      this.record('loadStart');\n      loadImageAsync({\n        src: this.src,\n        cors: this.cors\n      }, data => {\n        this.naturalHeight = data.naturalHeight;\n        this.naturalWidth = data.naturalWidth;\n        this.state.loaded = true;\n        this.state.error = false;\n        this.record('loadEnd');\n        this.render('loaded', false);\n        this.state.rendered = true;\n\n        this._imageCache.add(this.src);\n\n        onFinish();\n      }, err => {\n        !this.options.silent && console.error(err);\n        this.state.error = true;\n        this.state.loaded = false;\n        this.render('error', false);\n      });\n    });\n  }\n  /*\r\n   * render image\r\n   * @param  {String} state to render // ['loading', 'src', 'error']\r\n   * @param  {String} is form cache\r\n   * @return\r\n   */\n\n\n  render(state, cache) {\n    this.elRenderer(this, state, cache);\n  }\n  /*\r\n   * output performance data\r\n   * @return {Object} performance data\r\n   */\n\n\n  performance() {\n    let state = 'loading';\n    let time = 0;\n\n    if (this.state.loaded) {\n      state = 'loaded';\n      time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n    }\n\n    if (this.state.error) state = 'error';\n    return {\n      src: this.src,\n      state,\n      time\n    };\n  }\n  /*\r\n   * $destroy\r\n   * @return\r\n   */\n\n\n  $destroy() {\n    this.el = null;\n    this.src = '';\n    this.error = null;\n    this.loading = '';\n    this.bindType = null;\n    this.attempt = 0;\n  }\n\n}\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nconst DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: '0px',\n  threshold: 0\n};\n\nclass Lazy {\n  constructor({\n    preLoad,\n    error,\n    throttleWait,\n    preLoadTop,\n    dispatchEvent,\n    loading,\n    attempt,\n    silent = true,\n    scale,\n    listenEvents,\n    filter,\n    adapter,\n    observer,\n    observerOptions\n  }) {\n    this.version = '\"3.0.0-rc.1\"';\n    this.lazyContainerMananger = null;\n    this.mode = modeType.event;\n    this.ListenerQueue = [];\n    this.TargetIndex = 0;\n    this.TargetQueue = [];\n    this.options = {\n      silent: silent,\n      dispatchEvent: !!dispatchEvent,\n      throttleWait: throttleWait || 200,\n      preLoad: preLoad || 1.3,\n      preLoadTop: preLoadTop || 0,\n      error: error || DEFAULT_URL,\n      loading: loading || DEFAULT_URL,\n      attempt: attempt || 3,\n      scale: scale || getDPR(scale),\n      listenEvents: listenEvents || DEFAULT_EVENTS,\n      supportWebp: supportWebp(),\n      filter: filter || {},\n      adapter: adapter || {},\n      observer: !!observer,\n      observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n    };\n\n    this._initEvent();\n\n    this._imageCache = new ImageCache(200);\n    this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n    this.setMode(this.options.observer ? modeType.observer : modeType.event);\n  }\n  /**\r\n   * output listener's load performance\r\n   * @return {Array}\r\n   */\n\n\n  performance() {\n    const list = [];\n    this.ListenerQueue.map(item => list.push(item.performance()));\n    return list;\n  }\n  /*\r\n   * add lazy component to queue\r\n   * @param  {Vue} vm lazy component instance\r\n   * @return\r\n   */\n\n\n  addLazyBox(vm) {\n    this.ListenerQueue.push(vm);\n\n    if (inBrowser) {\n      this._addListenerTarget(window);\n\n      this._observer && this._observer.observe(vm.el);\n\n      if (vm.$el && vm.$el.parentNode) {\n        this._addListenerTarget(vm.$el.parentNode);\n      }\n    }\n  }\n  /*\r\n   * add image listener to queue\r\n   * @param  {DOM} el\r\n   * @param  {object} binding vue directive binding\r\n   * @param  {vnode} vnode vue directive vnode\r\n   * @return\r\n   */\n\n\n  add(el, binding, vnode) {\n    if (this.ListenerQueue.some(item => item.el === el)) {\n      this.update(el, binding);\n      return nextTick(this.lazyLoadHandler);\n    }\n\n    let {\n      src,\n      loading,\n      error,\n      cors\n    } = this._valueFormatter(binding.value);\n\n    nextTick(() => {\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n      this._observer && this._observer.observe(el);\n      const container = Object.keys(binding.modifiers)[0];\n      let $parent;\n\n      if (container) {\n        $parent = binding.instance.$refs[container]; // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n\n        $parent = $parent ? $parent.el || $parent : document.getElementById(container);\n      }\n\n      if (!$parent) {\n        $parent = scrollParent(el);\n      }\n\n      const newListener = new ReactiveListener(el, src, error, loading, binding.arg, $parent, this.options, cors, this._elRenderer.bind(this), this._imageCache);\n      this.ListenerQueue.push(newListener);\n\n      if (inBrowser) {\n        this._addListenerTarget(window);\n\n        this._addListenerTarget($parent);\n      }\n\n      nextTick(this.lazyLoadHandler);\n    });\n  }\n  /**\r\n  * update image src\r\n  * @param  {DOM} el\r\n  * @param  {object} vue directive binding\r\n  * @return\r\n  */\n\n\n  update(el, binding, vnode) {\n    let {\n      src,\n      loading,\n      error\n    } = this._valueFormatter(binding.value);\n\n    src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n    const exist = this.ListenerQueue.find(item => item.el === el);\n\n    if (!exist) {\n      if (el.getAttribute('lazy') !== 'loaded' || el.dataset.src !== src) {\n        this.add(el, binding, vnode);\n      }\n    } else {\n      exist.update({\n        src,\n        loading,\n        error\n      });\n    }\n\n    if (this._observer) {\n      this._observer.unobserve(el);\n\n      this._observer.observe(el);\n    }\n\n    nextTick(this.lazyLoadHandler);\n  }\n  /**\r\n  * remove listener form list\r\n  * @param  {DOM} el\r\n  * @return\r\n  */\n\n\n  remove(el) {\n    if (!el) return;\n    this._observer && this._observer.unobserve(el);\n    const existItem = this.ListenerQueue.find(item => item.el === el);\n\n    if (existItem) {\n      this._removeListenerTarget(existItem.$parent);\n\n      this._removeListenerTarget(window);\n\n      remove(this.ListenerQueue, existItem);\n      existItem.$destroy && existItem.$destroy();\n    }\n  }\n  /*\r\n   * remove lazy components form list\r\n   * @param  {Vue} vm Vue instance\r\n   * @return\r\n   */\n\n\n  removeComponent(vm) {\n    if (!vm) return;\n    remove(this.ListenerQueue, vm);\n    this._observer && this._observer.unobserve(vm.el);\n\n    if (vm.$parent && vm.$el.parentNode) {\n      this._removeListenerTarget(vm.$el.parentNode);\n    }\n\n    this._removeListenerTarget(window);\n  }\n\n  setMode(mode) {\n    if (!hasIntersectionObserver && mode === modeType.observer) {\n      mode = modeType.event;\n    }\n\n    this.mode = mode; // event or observer\n\n    if (mode === modeType.event) {\n      if (this._observer) {\n        this.ListenerQueue.forEach(listener => {\n          this._observer.unobserve(listener.el);\n        });\n        this._observer = null;\n      }\n\n      this.TargetQueue.forEach(target => {\n        this._initListen(target.el, true);\n      });\n    } else {\n      this.TargetQueue.forEach(target => {\n        this._initListen(target.el, false);\n      });\n\n      this._initIntersectionObserver();\n    }\n  }\n  /*\r\n  *** Private functions ***\r\n  */\n\n  /*\r\n   * add listener target\r\n   * @param  {DOM} el listener target\r\n   * @return\r\n   */\n\n\n  _addListenerTarget(el) {\n    if (!el) return;\n    let target = this.TargetQueue.find(target => target.el === el);\n\n    if (!target) {\n      target = {\n        el: el,\n        id: ++this.TargetIndex,\n        childrenCount: 1,\n        listened: true\n      };\n      this.mode === modeType.event && this._initListen(target.el, true);\n      this.TargetQueue.push(target);\n    } else {\n      target.childrenCount++;\n    }\n\n    return this.TargetIndex;\n  }\n  /*\r\n   * remove listener target or reduce target childrenCount\r\n   * @param  {DOM} el or window\r\n   * @return\r\n   */\n\n\n  _removeListenerTarget(el) {\n    this.TargetQueue.forEach((target, index) => {\n      if (target.el === el) {\n        target.childrenCount--;\n\n        if (!target.childrenCount) {\n          this._initListen(target.el, false);\n\n          this.TargetQueue.splice(index, 1);\n          target = null;\n        }\n      }\n    });\n  }\n  /*\r\n   * add or remove eventlistener\r\n   * @param  {DOM} el DOM or Window\r\n   * @param  {boolean} start flag\r\n   * @return\r\n   */\n\n\n  _initListen(el, start) {\n    this.options.listenEvents.forEach(evt => _[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler));\n  }\n\n  _initEvent() {\n    this.Event = {\n      listeners: {\n        loading: [],\n        loaded: [],\n        error: []\n      }\n    };\n\n    this.$on = (event, func) => {\n      if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n      this.Event.listeners[event].push(func);\n    };\n\n    this.$once = (event, func) => {\n      const vm = this;\n\n      function on() {\n        vm.$off(event, on);\n        func.apply(vm, arguments);\n      }\n\n      this.$on(event, on);\n    };\n\n    this.$off = (event, func) => {\n      if (!func) {\n        if (!this.Event.listeners[event]) return;\n        this.Event.listeners[event].length = 0;\n        return;\n      }\n\n      remove(this.Event.listeners[event], func);\n    };\n\n    this.$emit = (event, context, inCache) => {\n      if (!this.Event.listeners[event]) return;\n      this.Event.listeners[event].forEach(func => func(context, inCache));\n    };\n  }\n  /**\r\n   * find nodes which in viewport and trigger load\r\n   * @return\r\n   */\n\n\n  _lazyLoadHandler() {\n    const freeList = [];\n    this.ListenerQueue.forEach((listener, index) => {\n      if (!listener.el || !listener.el.parentNode || listener.state.loaded) {\n        freeList.push(listener);\n      }\n\n      const catIn = listener.checkInView();\n      if (!catIn) return;\n      if (!listener.state.loaded) listener.load();\n    });\n    freeList.forEach(item => {\n      remove(this.ListenerQueue, item);\n      item.$destroy && item.$destroy();\n    });\n  }\n  /**\r\n  * init IntersectionObserver\r\n  * set mode to observer\r\n  * @return\r\n  */\n\n\n  _initIntersectionObserver() {\n    if (!hasIntersectionObserver) return;\n    this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n\n    if (this.ListenerQueue.length) {\n      this.ListenerQueue.forEach(listener => {\n        this._observer.observe(listener.el);\n      });\n    }\n  }\n  /**\r\n  * init IntersectionObserver\r\n  * @param {Array<IntersectionObserverEntry>} entries\r\n  * @return\r\n  */\n\n\n  _observerHandler(entries) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        this.ListenerQueue.forEach(listener => {\n          if (listener.el === entry.target) {\n            if (listener.state.loaded) return this._observer.unobserve(listener.el);\n            listener.load();\n          }\n        });\n      }\n    });\n  }\n  /**\r\n  * set element attribute with image'url and state\r\n  * @param  {ReactiveListener} lazyload listener object\r\n  * @param  {TeventType} state will be rendered\r\n  * @param  {bool} inCache  is rendered from cache\r\n  * @return\r\n  */\n\n\n  _elRenderer(listener, state, cache) {\n    if (!listener.el) return;\n    const {\n      el,\n      bindType\n    } = listener;\n    let src;\n\n    switch (state) {\n      case 'loading':\n        src = listener.loading;\n        break;\n\n      case 'error':\n        src = listener.error;\n        break;\n\n      default:\n        src = listener.src;\n        break;\n    }\n\n    if (bindType) {\n      // @ts-ignore\n      el.style[bindType] = 'url(\"' + src + '\")';\n    } else if (el.getAttribute('src') !== src) {\n      el.setAttribute('src', src);\n    }\n\n    el.setAttribute('lazy', state);\n    this.$emit(state, listener, cache);\n    this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n\n    if (this.options.dispatchEvent) {\n      const event = new CustomEvent(state, {\n        detail: listener\n      });\n      el.dispatchEvent(event);\n    }\n  }\n\n  _valueFormatter(value) {\n    if (typeof value === 'object') {\n      if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n      return {\n        src: value.src,\n        loading: value.loading || this.options.loading,\n        error: value.error || this.options.error,\n        cors: this.options.cors\n      };\n    }\n\n    return {\n      src: value,\n      loading: this.options.loading,\n      error: this.options.error,\n      cors: this.options.cors\n    };\n  }\n\n}\n\nconst useCheckInView = (el, preLoad) => {\n  let rect = reactive({});\n\n  const getRect = () => {\n    rect = el.value.getBoundingClientRect();\n  };\n\n  const checkInView = () => {\n    getRect();\n    return inBrowser && rect.top < window.innerHeight * preLoad && rect.bottom > 0 && rect.left < window.innerWidth * preLoad && rect.right > 0;\n  };\n\n  return {\n    rect,\n    checkInView\n  };\n};\n\nvar LazyComponent = lazy => {\n  return defineComponent({\n    props: {\n      tag: {\n        type: String,\n        default: 'div'\n      }\n    },\n    emits: ['show'],\n\n    setup(props, {\n      emit,\n      slots\n    }) {\n      const el = ref();\n      const state = reactive({\n        loaded: false,\n        error: false,\n        attempt: 0\n      });\n      const show = ref(false);\n      const {\n        rect,\n        checkInView\n      } = useCheckInView(el, lazy.options.preLoad);\n\n      const load = () => {\n        show.value = true;\n        state.loaded = true;\n        emit('show', show.value);\n      };\n\n      const vm = computed(() => {\n        return {\n          el: el.value,\n          rect,\n          checkInView,\n          load,\n          state\n        };\n      });\n      onMounted(() => {\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      });\n      onUnmounted(() => {\n        lazy.removeComponent(vm.value);\n      });\n      return () => {\n        var _a;\n\n        return createVNode(props.tag, {\n          ref: el\n        }, [show.value && ((_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots))]);\n      };\n    }\n\n  });\n};\n\nclass LazyContainerMananger {\n  constructor(lazy) {\n    this.lazy = lazy;\n    lazy.lazyContainerMananger = this;\n    this._queue = [];\n  }\n\n  bind(el, binding, vnode) {\n    const container = new LazyContainer(el, binding, vnode, this.lazy);\n\n    this._queue.push(container);\n  }\n\n  update(el, binding, vnode) {\n    const container = this._queue.find(item => item.el === el);\n\n    if (!container) return;\n    container.update(el, binding);\n  }\n\n  unbind(el, binding, vnode) {\n    const container = this._queue.find(item => item.el === el);\n\n    if (!container) return;\n    container.clear();\n    remove(this._queue, container);\n  }\n\n}\n\nconst defaultOptions = {\n  selector: 'img',\n  error: '',\n  loading: ''\n};\n\nclass LazyContainer {\n  constructor(el, binding, vnode, lazy) {\n    this.el = el;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n    this._queue = [];\n    this.update(el, binding);\n  }\n\n  update(el, binding) {\n    this.el = el;\n    this.options = assignDeep({}, defaultOptions, binding.value);\n    const imgs = this.getImgs();\n    imgs.forEach(el => {\n      this.lazy.add(el, assignDeep({}, this.binding, {\n        value: {\n          src: el.getAttribute('data-src') || el.dataset.src,\n          error: el.getAttribute('data-error') || el.dataset.error || this.options.error,\n          loading: el.getAttribute('data-loading') || el.dataset.loading || this.options.loading\n        }\n      }), this.vnode);\n    });\n  }\n\n  getImgs() {\n    return Array.from(this.el.querySelectorAll(this.options.selector));\n  }\n\n  clear() {\n    const imgs = this.getImgs();\n    imgs.forEach(el => this.lazy.remove(el));\n    this.vnode = null;\n    this.binding = null;\n    this.lazy = null;\n  }\n\n}\n\nvar LazyImage = lazy => {\n  return defineComponent({\n    setup(props, {\n      slots\n    }) {\n      const el = ref();\n      const options = reactive({\n        src: '',\n        error: '',\n        loading: '',\n        attempt: lazy.options.attempt\n      });\n      const state = reactive({\n        loaded: false,\n        error: false,\n        attempt: 0\n      });\n      const {\n        rect,\n        checkInView\n      } = useCheckInView(el, lazy.options.preLoad);\n      const renderSrc = ref('');\n\n      const load = (onFinish = noop) => {\n        if (state.attempt > options.attempt - 1 && state.error) {\n          if (!lazy.options.silent) console.log(`VueLazyload log: ${options.src} tried too more than ${options.attempt} times`);\n          return onFinish();\n        }\n\n        const src = options.src;\n        loadImageAsync({\n          src\n        }, ({\n          src\n        }) => {\n          renderSrc.value = src;\n          state.loaded = true;\n        }, () => {\n          state.attempt++;\n          renderSrc.value = options.error;\n          state.error = true;\n        });\n      };\n\n      const vm = computed(() => {\n        return {\n          el: el.value,\n          rect,\n          checkInView,\n          load,\n          state\n        };\n      });\n      onMounted(() => {\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      });\n      onUnmounted(() => {\n        lazy.removeComponent(vm.value);\n      });\n\n      const init = () => {\n        const {\n          src,\n          loading,\n          error\n        } = lazy._valueFormatter(props.src);\n\n        state.loaded = false;\n        options.src = src;\n        options.error = error;\n        options.loading = loading;\n        renderSrc.value = options.loading;\n      };\n\n      watch(() => props.src, () => {\n        init();\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      }, {\n        immediate: true\n      });\n      return () => {\n        var _a;\n\n        return createVNode(props.tag || 'img', {\n          src: renderSrc.value,\n          ref: el\n        }, [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n      };\n    }\n\n  });\n};\n\nvar index = {\n  /*\r\n  * install function\r\n  * @param  {Vue} Vue\r\n  * @param  {object} options lazyload options\r\n  */\n  install(Vue, options = {}) {\n    const lazy = new Lazy(options);\n    const lazyContainer = new LazyContainerMananger(lazy);\n    const vueVersion = Number(Vue.version.split('.')[0]);\n    if (vueVersion < 3) return new Error('Vue version at least 3.0');\n    Vue.config.globalProperties.$Lazyload = lazy;\n    Vue.provide('Lazyload', lazy);\n\n    if (options.lazyComponent) {\n      Vue.component('lazy-component', LazyComponent(lazy));\n    }\n\n    if (options.lazyImage) {\n      Vue.component('lazy-image', LazyImage(lazy));\n    }\n\n    Vue.directive('lazy', {\n      beforeMount: lazy.add.bind(lazy),\n      beforeUpdate: lazy.update.bind(lazy),\n      updated: lazy.lazyLoadHandler.bind(lazy),\n      unmounted: lazy.remove.bind(lazy)\n    });\n    Vue.directive('lazy-container', {\n      beforeMount: lazyContainer.bind.bind(lazyContainer),\n      updated: lazyContainer.update.bind(lazyContainer),\n      unmounted: lazyContainer.unbind.bind(lazyContainer)\n    });\n  }\n\n};\nexport { index as default };","map":{"version":3,"names":["nextTick","reactive","defineComponent","ref","computed","onMounted","onUnmounted","createVNode","watch","createCommonjsModule","fn","module","exports","assignSymbols$1","toString","Object","prototype","isEnumerable","propertyIsEnumerable","getSymbols","getOwnPropertySymbols","target","args","isObject","TypeError","length","Symbol","arg","names","key","call","val","Array","isArray","assignSymbols$2","freeze","__proto__","__moduleExports","assignSymbols","assignDeep","isValidKey","assign","i","isPrimitive","keys","inBrowser","window","hasIntersectionObserver","checkIntersectionObserver","IntersectionObserverEntry","defineProperty","get","intersectionRatio","modeType","event","observer","remove","arr","item","index","indexOf","splice","getBestSelectionFromSrcset","el","scale","tagName","getAttribute","options","trim","split","result","container","parentNode","containerWidth","offsetWidth","spaceIndex","tmpSrc","tmpWidth","forEach","lastIndexOf","substr","parseInt","push","sort","a","b","bestSelectedSrc","tmpOption","next","getDPR","devicePixelRatio","supportWebp","support","checkWebpFeature","feature","callback","kTestImages","lossy","lossless","alpha","animation","img","Image","onload","width","height","onerror","src","isSupported","throttle","action","delay","timeout","lastRun","elapsed","Date","now","context","arguments","runCallback","apply","setTimeout","testSupportsPassive","opts","addEventListener","noop","e","supportsPassive","_","on","type","func","capture","passive","off","removeEventListener","loadImageAsync","resolve","reject","image","err","Error","cors","crossOrigin","naturalHeight","naturalWidth","style","prop","getComputedStyle","getPropertyValue","overflow","scrollParent","Element","parent","document","body","documentElement","test","ImageCache","constructor","max","_caches","has","add","free","shift","ReactiveListener","error","loading","bindType","$parent","elRenderer","imageCache","attempt","rect","_imageCache","performanceData","init","loadStart","loadEnd","filter","initState","render","dataset","setAttribute","state","loaded","rendered","record","update","option","oldSrc","getRect","getBoundingClientRect","checkInView","top","innerHeight","preLoad","bottom","preLoadTop","left","innerWidth","right","renderLoading","cb","silent","console","warn","load","onFinish","log","adapter","beforeLoad","data","cache","performance","time","$destroy","DEFAULT_URL","DEFAULT_EVENTS","DEFAULT_OBSERVER_OPTIONS","rootMargin","threshold","Lazy","throttleWait","dispatchEvent","listenEvents","observerOptions","version","lazyContainerMananger","mode","ListenerQueue","TargetIndex","TargetQueue","_initEvent","lazyLoadHandler","_lazyLoadHandler","bind","setMode","list","map","addLazyBox","vm","_addListenerTarget","_observer","observe","$el","binding","vnode","some","_valueFormatter","value","modifiers","instance","$refs","getElementById","newListener","_elRenderer","exist","find","unobserve","existItem","_removeListenerTarget","removeComponent","listener","_initListen","_initIntersectionObserver","id","childrenCount","listened","start","evt","Event","listeners","$on","$once","$off","$emit","inCache","freeList","catIn","IntersectionObserver","_observerHandler","entries","entry","isIntersecting","CustomEvent","detail","useCheckInView","LazyComponent","lazy","props","tag","String","default","emits","setup","emit","slots","show","_a","LazyContainerMananger","_queue","LazyContainer","unbind","clear","defaultOptions","selector","imgs","getImgs","from","querySelectorAll","LazyImage","renderSrc","immediate","install","Vue","lazyContainer","vueVersion","Number","config","globalProperties","$Lazyload","provide","lazyComponent","component","lazyImage","directive","beforeMount","beforeUpdate","updated","unmounted"],"sources":["/Users/yanghuazhou/Desktop/前端/project-shop/node_modules/_vue-lazyload@3.0.0-rc.2@vue-lazyload/vue-lazyload.esm.js"],"sourcesContent":["/*!\n * Vue-Lazyload.js v3.0.0-rc.1\n * (c) 2022 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\n\nimport { nextTick, reactive, defineComponent, ref, computed, onMounted, onUnmounted, createVNode, watch } from 'vue';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar assignSymbols$1 = createCommonjsModule(function (module) {\n\n  const toString = Object.prototype.toString;\n  const isEnumerable = Object.prototype.propertyIsEnumerable;\n  const getSymbols = Object.getOwnPropertySymbols;\n\n  module.exports = (target, ...args) => {\n    if (!isObject(target)) {\n      throw new TypeError('expected the first argument to be an object');\n    }\n\n    if (args.length === 0 || typeof Symbol !== 'function' || typeof getSymbols !== 'function') {\n      return target;\n    }\n\n    for (let arg of args) {\n      let names = getSymbols(arg);\n\n      for (let key of names) {\n        if (isEnumerable.call(arg, key)) {\n          target[key] = arg[key];\n        }\n      }\n    }\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]' || Array.isArray(val);\n  }\n});\n\nvar assignSymbols$2 = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\t'default': assignSymbols$1,\n\t__moduleExports: assignSymbols$1\n});\n\nvar assignSymbols = ( assignSymbols$2 && assignSymbols$1 ) || assignSymbols$2;\n\nvar assignDeep = createCommonjsModule(function (module) {\n\n  const toString = Object.prototype.toString;\n\n  const isValidKey = key => {\n    return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n  };\n\n  const assign = module.exports = (target, ...args) => {\n    let i = 0;\n    if (isPrimitive(target)) target = args[i++];\n    if (!target) target = {};\n    for (; i < args.length; i++) {\n      if (isObject(args[i])) {\n        for (const key of Object.keys(args[i])) {\n          if (isValidKey(key)) {\n            if (isObject(target[key]) && isObject(args[i][key])) {\n              assign(target[key], args[i][key]);\n            } else {\n              target[key] = args[i][key];\n            }\n          }\n        }\n        assignSymbols(target, args[i]);\n      }\n    }\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]';\n  }\n\n  function isPrimitive(val) {\n    return typeof val === 'object' ? val === null : typeof val !== 'function';\n  }\n});\n\nconst inBrowser = typeof window !== 'undefined' && window !== null;\nconst hasIntersectionObserver = checkIntersectionObserver();\nfunction checkIntersectionObserver() {\n    if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n        // Minimal polyfill for Edge 15's lack of `isIntersecting`\n        // See: https://github.com/w3c/IntersectionObserver/issues/211\n        if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n            Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n                get: function () {\n                    return this.intersectionRatio > 0;\n                }\n            });\n        }\n        return true;\n    }\n    return false;\n}\nconst modeType = {\n    event: 'event',\n    observer: 'observer'\n};\nfunction remove(arr, item) {\n    if (!arr.length) return;\n    const index = arr.indexOf(item);\n    if (index > -1) return arr.splice(index, 1);\n}\nfunction getBestSelectionFromSrcset(el, scale) {\n    if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return '';\n    let options = el.getAttribute('data-srcset').trim().split(',');\n    const result = [];\n    const container = el.parentNode;\n    const containerWidth = container.offsetWidth * scale;\n    let spaceIndex;\n    let tmpSrc;\n    let tmpWidth;\n    options.forEach(item => {\n        item = item.trim();\n        spaceIndex = item.lastIndexOf(' ');\n        if (spaceIndex === -1) {\n            tmpSrc = item;\n            tmpWidth = 99999;\n        } else {\n            tmpSrc = item.substr(0, spaceIndex);\n            tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n        }\n        result.push([tmpWidth, tmpSrc]);\n    });\n    result.sort((a, b) => {\n        if (a[0] < b[0]) {\n            return 1;\n        }\n        if (a[0] > b[0]) {\n            return -1;\n        }\n        if (a[0] === b[0]) {\n            if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n                return 1;\n            }\n            if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n                return -1;\n            }\n        }\n        return 0;\n    });\n    let bestSelectedSrc = '';\n    let tmpOption;\n    for (let i = 0; i < result.length; i++) {\n        tmpOption = result[i];\n        bestSelectedSrc = tmpOption[1];\n        const next = result[i + 1];\n        if (next && next[0] < containerWidth) {\n            bestSelectedSrc = tmpOption[1];\n            break;\n        } else if (!next) {\n            bestSelectedSrc = tmpOption[1];\n            break;\n        }\n    }\n    return bestSelectedSrc;\n}\nconst getDPR = (scale = 1) => inBrowser ? window.devicePixelRatio || scale : scale;\n// https://developers.google.com/speed/webp/faq#how_can_i_detect_browser_support_using_javascript\nfunction supportWebp() {\n    if (!inBrowser) return false;\n    let support = true;\n    function checkWebpFeature(feature, callback) {\n        const kTestImages = {\n            lossy: 'UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA',\n            lossless: 'UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==',\n            alpha: 'UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==',\n            animation: 'UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA'\n        };\n        const img = new Image();\n        img.onload = function () {\n            const result = img.width > 0 && img.height > 0;\n            callback(result);\n        };\n        img.onerror = function () {\n            // eslint-disable-next-line node/no-callback-literal\n            callback(false);\n        };\n        img.src = 'data:image/webp;base64,' + kTestImages[feature];\n    }\n    checkWebpFeature('lossy', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('lossless', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('alpha', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('animation', isSupported => {\n        support = isSupported;\n    });\n    return support;\n}\nfunction throttle(action, delay) {\n    let timeout = null;\n    let lastRun = 0;\n    return function () {\n        if (timeout) {\n            return;\n        }\n        const elapsed = Date.now() - lastRun;\n        // @ts-ignore\n        const context = this;\n        const args = arguments;\n        const runCallback = function () {\n            lastRun = Date.now();\n            timeout = false;\n            action.apply(context, args);\n        };\n        if (elapsed >= delay) {\n            runCallback();\n        } else {\n            timeout = setTimeout(runCallback, delay);\n        }\n    };\n}\nfunction testSupportsPassive() {\n    if (!inBrowser) return false;\n    let support = false;\n    try {\n        const opts = Object.defineProperty({}, 'passive', {\n            get: function () {\n                support = true;\n            }\n        });\n        window.addEventListener('test', noop, opts);\n    } catch (e) {}\n    return support;\n}\nconst supportsPassive = testSupportsPassive();\nconst _ = {\n    on(el, type, func, capture = false) {\n        if (supportsPassive) {\n            el.addEventListener(type, func, {\n                capture: capture,\n                passive: true\n            });\n        } else {\n            el.addEventListener(type, func, capture);\n        }\n    },\n    off(el, type, func, capture = false) {\n        el.removeEventListener(type, func, capture);\n    }\n};\nconst loadImageAsync = (item, resolve, reject) => {\n    let image = new Image();\n    if (!item || !item.src) {\n        const err = new Error('image src is required');\n        return reject(err);\n    }\n    if (item.cors) {\n        image.crossOrigin = item.cors;\n    }\n    image.src = item.src;\n    image.onload = function () {\n        resolve({\n            naturalHeight: image.naturalHeight,\n            naturalWidth: image.naturalWidth,\n            src: image.src\n        });\n        image = null;\n    };\n    image.onerror = function (e) {\n        reject(e);\n    };\n};\n// keyof CSSStyleDeclaration\nconst style = (el, prop) => {\n    return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\nconst overflow = el => {\n    return style(el, 'overflow') + style(el, 'overflowY') + style(el, 'overflowX');\n};\nconst scrollParent = el => {\n    if (!inBrowser) return;\n    if (!(el instanceof Element)) {\n        return window;\n    }\n    let parent = el;\n    while (parent) {\n        if (parent === document.body || parent === document.documentElement) {\n            break;\n        }\n        if (!parent.parentNode) {\n            break;\n        }\n        if (/(scroll|auto)/.test(overflow(parent))) {\n            return parent;\n        }\n        parent = parent.parentNode;\n    }\n    return window;\n};\nfunction noop() {}\nclass ImageCache {\n    constructor(max) {\n        this.max = max || 100;\n        this._caches = [];\n    }\n    has(key) {\n        return this._caches.indexOf(key) > -1;\n    }\n    add(key) {\n        if (this.has(key)) return;\n        this._caches.push(key);\n        if (this._caches.length > this.max) {\n            this.free();\n        }\n    }\n    free() {\n        this._caches.shift();\n    }\n}\n\n// el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\nclass ReactiveListener {\n    constructor(el, src, error, loading, bindType, $parent, options, cors, elRenderer, imageCache) {\n        this.el = el;\n        this.src = src;\n        this.error = error;\n        this.loading = loading;\n        this.bindType = bindType;\n        this.attempt = 0;\n        this.cors = cors;\n        this.naturalHeight = 0;\n        this.naturalWidth = 0;\n        this.options = options;\n        this.rect = {};\n        this.$parent = $parent;\n        this.elRenderer = elRenderer;\n        this._imageCache = imageCache;\n        this.performanceData = {\n            init: Date.now(),\n            loadStart: 0,\n            loadEnd: 0\n        };\n        this.filter();\n        this.initState();\n        this.render('loading', false);\n    }\n    /*\r\n     * init listener state\r\n     * @return\r\n     */\n    initState() {\n        if ('dataset' in this.el) {\n            this.el.dataset.src = this.src;\n        } else {\n            this.el.setAttribute('data-src', this.src);\n        }\n        this.state = {\n            loading: false,\n            error: false,\n            loaded: false,\n            rendered: false\n        };\n    }\n    /*\r\n     * record performance\r\n     * @return\r\n     */\n    record(event) {\n        this.performanceData[event] = Date.now();\n    }\n    /*\r\n     * update image listener data\r\n     * @param  {String} image uri\r\n     * @param  {String} loading image uri\r\n     * @param  {String} error image uri\r\n     * @return\r\n     */\n    update(option) {\n        const oldSrc = this.src;\n        this.src = option.src;\n        this.loading = option.loading;\n        this.error = option.error;\n        this.filter();\n        if (oldSrc !== this.src) {\n            this.attempt = 0;\n            this.initState();\n        }\n    }\n    /*\r\n     * get el node rect\r\n     * @return\r\n     */\n    getRect() {\n        this.rect = this.el.getBoundingClientRect();\n    }\n    /*\r\n     * check el is in view\r\n     * @return {Boolean} el is in view\r\n     */\n    checkInView() {\n        this.getRect();\n        return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n    }\n    /*\r\n     * listener filter\r\n     */\n    filter() {\n        for (const key in this.options.filter) {\n            this.options.filter[key](this, this.options);\n        }\n    }\n    /*\r\n     * render loading first\r\n     * @params cb:Function\r\n     * @return\r\n     */\n    renderLoading(cb) {\n        this.state.loading = true;\n        loadImageAsync({\n            src: this.loading,\n            cors: this.cors\n        }, () => {\n            this.render('loading', false);\n            this.state.loading = false;\n            cb();\n        }, () => {\n            // handler `loading image` load failed\n            cb();\n            this.state.loading = false;\n            if (!this.options.silent) console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);\n        });\n    }\n    /*\r\n     * try load image and  render it\r\n     * @return\r\n     */\n    load(onFinish = noop) {\n        if (this.attempt > this.options.attempt - 1 && this.state.error) {\n            if (!this.options.silent) console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`);\n            onFinish();\n            return;\n        }\n        if (this.state.rendered && this.state.loaded) return;\n        if (this._imageCache.has(this.src)) {\n            this.state.loaded = true;\n            this.render('loaded', true);\n            this.state.rendered = true;\n            return onFinish();\n        }\n        this.renderLoading(() => {\n            this.attempt++;\n            this.options.adapter.beforeLoad && this.options.adapter.beforeLoad(this, this.options);\n            this.record('loadStart');\n            loadImageAsync({\n                src: this.src,\n                cors: this.cors\n            }, data => {\n                this.naturalHeight = data.naturalHeight;\n                this.naturalWidth = data.naturalWidth;\n                this.state.loaded = true;\n                this.state.error = false;\n                this.record('loadEnd');\n                this.render('loaded', false);\n                this.state.rendered = true;\n                this._imageCache.add(this.src);\n                onFinish();\n            }, err => {\n                !this.options.silent && console.error(err);\n                this.state.error = true;\n                this.state.loaded = false;\n                this.render('error', false);\n            });\n        });\n    }\n    /*\r\n     * render image\r\n     * @param  {String} state to render // ['loading', 'src', 'error']\r\n     * @param  {String} is form cache\r\n     * @return\r\n     */\n    render(state, cache) {\n        this.elRenderer(this, state, cache);\n    }\n    /*\r\n     * output performance data\r\n     * @return {Object} performance data\r\n     */\n    performance() {\n        let state = 'loading';\n        let time = 0;\n        if (this.state.loaded) {\n            state = 'loaded';\n            time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n        }\n        if (this.state.error) state = 'error';\n        return {\n            src: this.src,\n            state,\n            time\n        };\n    }\n    /*\r\n     * $destroy\r\n     * @return\r\n     */\n    $destroy() {\n        this.el = null;\n        this.src = '';\n        this.error = null;\n        this.loading = '';\n        this.bindType = null;\n        this.attempt = 0;\n    }\n}\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nconst DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nconst DEFAULT_OBSERVER_OPTIONS = {\n    rootMargin: '0px',\n    threshold: 0\n};\nclass Lazy {\n    constructor({ preLoad, error, throttleWait, preLoadTop, dispatchEvent, loading, attempt, silent = true, scale, listenEvents, filter, adapter, observer, observerOptions }) {\n        this.version = '\"3.0.0-rc.1\"';\n        this.lazyContainerMananger = null;\n        this.mode = modeType.event;\n        this.ListenerQueue = [];\n        this.TargetIndex = 0;\n        this.TargetQueue = [];\n        this.options = {\n            silent: silent,\n            dispatchEvent: !!dispatchEvent,\n            throttleWait: throttleWait || 200,\n            preLoad: preLoad || 1.3,\n            preLoadTop: preLoadTop || 0,\n            error: error || DEFAULT_URL,\n            loading: loading || DEFAULT_URL,\n            attempt: attempt || 3,\n            scale: scale || getDPR(scale),\n            listenEvents: listenEvents || DEFAULT_EVENTS,\n            supportWebp: supportWebp(),\n            filter: filter || {},\n            adapter: adapter || {},\n            observer: !!observer,\n            observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n        };\n        this._initEvent();\n        this._imageCache = new ImageCache(200);\n        this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n        this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n    /**\r\n     * output listener's load performance\r\n     * @return {Array}\r\n     */\n    performance() {\n        const list = [];\n        this.ListenerQueue.map(item => list.push(item.performance()));\n        return list;\n    }\n    /*\r\n     * add lazy component to queue\r\n     * @param  {Vue} vm lazy component instance\r\n     * @return\r\n     */\n    addLazyBox(vm) {\n        this.ListenerQueue.push(vm);\n        if (inBrowser) {\n            this._addListenerTarget(window);\n            this._observer && this._observer.observe(vm.el);\n            if (vm.$el && vm.$el.parentNode) {\n                this._addListenerTarget(vm.$el.parentNode);\n            }\n        }\n    }\n    /*\r\n     * add image listener to queue\r\n     * @param  {DOM} el\r\n     * @param  {object} binding vue directive binding\r\n     * @param  {vnode} vnode vue directive vnode\r\n     * @return\r\n     */\n    add(el, binding, vnode) {\n        if (this.ListenerQueue.some(item => item.el === el)) {\n            this.update(el, binding);\n            return nextTick(this.lazyLoadHandler);\n        }\n        let { src, loading, error, cors } = this._valueFormatter(binding.value);\n        nextTick(() => {\n            src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n            this._observer && this._observer.observe(el);\n            const container = Object.keys(binding.modifiers)[0];\n            let $parent;\n            if (container) {\n                $parent = binding.instance.$refs[container];\n                // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n                $parent = $parent ? $parent.el || $parent : document.getElementById(container);\n            }\n            if (!$parent) {\n                $parent = scrollParent(el);\n            }\n            const newListener = new ReactiveListener(el, src, error, loading, binding.arg, $parent, this.options, cors, this._elRenderer.bind(this), this._imageCache);\n            this.ListenerQueue.push(newListener);\n            if (inBrowser) {\n                this._addListenerTarget(window);\n                this._addListenerTarget($parent);\n            }\n            nextTick(this.lazyLoadHandler);\n        });\n    }\n    /**\r\n    * update image src\r\n    * @param  {DOM} el\r\n    * @param  {object} vue directive binding\r\n    * @return\r\n    */\n    update(el, binding, vnode) {\n        let { src, loading, error } = this._valueFormatter(binding.value);\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        const exist = this.ListenerQueue.find(item => item.el === el);\n        if (!exist) {\n            if (el.getAttribute('lazy') !== 'loaded' || el.dataset.src !== src) {\n                this.add(el, binding, vnode);\n            }\n        } else {\n            exist.update({\n                src,\n                loading,\n                error\n            });\n        }\n        if (this._observer) {\n            this._observer.unobserve(el);\n            this._observer.observe(el);\n        }\n        nextTick(this.lazyLoadHandler);\n    }\n    /**\r\n    * remove listener form list\r\n    * @param  {DOM} el\r\n    * @return\r\n    */\n    remove(el) {\n        if (!el) return;\n        this._observer && this._observer.unobserve(el);\n        const existItem = this.ListenerQueue.find(item => item.el === el);\n        if (existItem) {\n            this._removeListenerTarget(existItem.$parent);\n            this._removeListenerTarget(window);\n            remove(this.ListenerQueue, existItem);\n            existItem.$destroy && existItem.$destroy();\n        }\n    }\n    /*\r\n     * remove lazy components form list\r\n     * @param  {Vue} vm Vue instance\r\n     * @return\r\n     */\n    removeComponent(vm) {\n        if (!vm) return;\n        remove(this.ListenerQueue, vm);\n        this._observer && this._observer.unobserve(vm.el);\n        if (vm.$parent && vm.$el.parentNode) {\n            this._removeListenerTarget(vm.$el.parentNode);\n        }\n        this._removeListenerTarget(window);\n    }\n    setMode(mode) {\n        if (!hasIntersectionObserver && mode === modeType.observer) {\n            mode = modeType.event;\n        }\n        this.mode = mode; // event or observer\n        if (mode === modeType.event) {\n            if (this._observer) {\n                this.ListenerQueue.forEach(listener => {\n                    this._observer.unobserve(listener.el);\n                });\n                this._observer = null;\n            }\n            this.TargetQueue.forEach(target => {\n                this._initListen(target.el, true);\n            });\n        } else {\n            this.TargetQueue.forEach(target => {\n                this._initListen(target.el, false);\n            });\n            this._initIntersectionObserver();\n        }\n    }\n    /*\r\n    *** Private functions ***\r\n    */\n    /*\r\n     * add listener target\r\n     * @param  {DOM} el listener target\r\n     * @return\r\n     */\n    _addListenerTarget(el) {\n        if (!el) return;\n        let target = this.TargetQueue.find(target => target.el === el);\n        if (!target) {\n            target = {\n                el: el,\n                id: ++this.TargetIndex,\n                childrenCount: 1,\n                listened: true\n            };\n            this.mode === modeType.event && this._initListen(target.el, true);\n            this.TargetQueue.push(target);\n        } else {\n            target.childrenCount++;\n        }\n        return this.TargetIndex;\n    }\n    /*\r\n     * remove listener target or reduce target childrenCount\r\n     * @param  {DOM} el or window\r\n     * @return\r\n     */\n    _removeListenerTarget(el) {\n        this.TargetQueue.forEach((target, index) => {\n            if (target.el === el) {\n                target.childrenCount--;\n                if (!target.childrenCount) {\n                    this._initListen(target.el, false);\n                    this.TargetQueue.splice(index, 1);\n                    target = null;\n                }\n            }\n        });\n    }\n    /*\r\n     * add or remove eventlistener\r\n     * @param  {DOM} el DOM or Window\r\n     * @param  {boolean} start flag\r\n     * @return\r\n     */\n    _initListen(el, start) {\n        this.options.listenEvents.forEach(evt => _[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler));\n    }\n    _initEvent() {\n        this.Event = {\n            listeners: {\n                loading: [],\n                loaded: [],\n                error: []\n            }\n        };\n        this.$on = (event, func) => {\n            if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n            this.Event.listeners[event].push(func);\n        };\n        this.$once = (event, func) => {\n            const vm = this;\n            function on() {\n                vm.$off(event, on);\n                func.apply(vm, arguments);\n            }\n            this.$on(event, on);\n        };\n        this.$off = (event, func) => {\n            if (!func) {\n                if (!this.Event.listeners[event]) return;\n                this.Event.listeners[event].length = 0;\n                return;\n            }\n            remove(this.Event.listeners[event], func);\n        };\n        this.$emit = (event, context, inCache) => {\n            if (!this.Event.listeners[event]) return;\n            this.Event.listeners[event].forEach(func => func(context, inCache));\n        };\n    }\n    /**\r\n     * find nodes which in viewport and trigger load\r\n     * @return\r\n     */\n    _lazyLoadHandler() {\n        const freeList = [];\n        this.ListenerQueue.forEach((listener, index) => {\n            if (!listener.el || !listener.el.parentNode || listener.state.loaded) {\n                freeList.push(listener);\n            }\n            const catIn = listener.checkInView();\n            if (!catIn) return;\n            if (!listener.state.loaded) listener.load();\n        });\n        freeList.forEach(item => {\n            remove(this.ListenerQueue, item);\n            item.$destroy && item.$destroy();\n        });\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * set mode to observer\r\n    * @return\r\n    */\n    _initIntersectionObserver() {\n        if (!hasIntersectionObserver) return;\n        this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n        if (this.ListenerQueue.length) {\n            this.ListenerQueue.forEach(listener => {\n                this._observer.observe(listener.el);\n            });\n        }\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * @param {Array<IntersectionObserverEntry>} entries\r\n    * @return\r\n    */\n    _observerHandler(entries) {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                this.ListenerQueue.forEach(listener => {\n                    if (listener.el === entry.target) {\n                        if (listener.state.loaded) return this._observer.unobserve(listener.el);\n                        listener.load();\n                    }\n                });\n            }\n        });\n    }\n    /**\r\n    * set element attribute with image'url and state\r\n    * @param  {ReactiveListener} lazyload listener object\r\n    * @param  {TeventType} state will be rendered\r\n    * @param  {bool} inCache  is rendered from cache\r\n    * @return\r\n    */\n    _elRenderer(listener, state, cache) {\n        if (!listener.el) return;\n        const { el, bindType } = listener;\n        let src;\n        switch (state) {\n            case 'loading':\n                src = listener.loading;\n                break;\n            case 'error':\n                src = listener.error;\n                break;\n            default:\n                src = listener.src;\n                break;\n        }\n        if (bindType) {\n            // @ts-ignore\n            el.style[bindType] = 'url(\"' + src + '\")';\n        } else if (el.getAttribute('src') !== src) {\n            el.setAttribute('src', src);\n        }\n        el.setAttribute('lazy', state);\n        this.$emit(state, listener, cache);\n        this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n        if (this.options.dispatchEvent) {\n            const event = new CustomEvent(state, {\n                detail: listener\n            });\n            el.dispatchEvent(event);\n        }\n    }\n    _valueFormatter(value) {\n        if (typeof value === 'object') {\n            if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n            return {\n                src: value.src,\n                loading: value.loading || this.options.loading,\n                error: value.error || this.options.error,\n                cors: this.options.cors\n            };\n        }\n        return {\n            src: value,\n            loading: this.options.loading,\n            error: this.options.error,\n            cors: this.options.cors\n        };\n    }\n}\n\nconst useCheckInView = (el, preLoad) => {\n    let rect = reactive({});\n    const getRect = () => {\n        rect = el.value.getBoundingClientRect();\n    };\n    const checkInView = () => {\n        getRect();\n        return inBrowser && rect.top < window.innerHeight * preLoad && rect.bottom > 0 && rect.left < window.innerWidth * preLoad && rect.right > 0;\n    };\n    return {\n        rect,\n        checkInView\n    };\n};\n\nvar LazyComponent = (lazy => {\n    return defineComponent({\n        props: {\n            tag: {\n                type: String,\n                default: 'div'\n            }\n        },\n        emits: ['show'],\n        setup(props, { emit, slots }) {\n            const el = ref();\n            const state = reactive({\n                loaded: false,\n                error: false,\n                attempt: 0\n            });\n            const show = ref(false);\n            const { rect, checkInView } = useCheckInView(el, lazy.options.preLoad);\n            const load = () => {\n                show.value = true;\n                state.loaded = true;\n                emit('show', show.value);\n            };\n            const vm = computed(() => {\n                return {\n                    el: el.value,\n                    rect,\n                    checkInView,\n                    load,\n                    state\n                };\n            });\n            onMounted(() => {\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            });\n            onUnmounted(() => {\n                lazy.removeComponent(vm.value);\n            });\n            return () => {\n                var _a;\n                return createVNode(props.tag, {\n                    ref: el\n                }, [show.value && ((_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots))]);\n            };\n        }\n    });\n});\n\nclass LazyContainerMananger {\n    constructor(lazy) {\n        this.lazy = lazy;\n        lazy.lazyContainerMananger = this;\n        this._queue = [];\n    }\n    bind(el, binding, vnode) {\n        const container = new LazyContainer(el, binding, vnode, this.lazy);\n        this._queue.push(container);\n    }\n    update(el, binding, vnode) {\n        const container = this._queue.find(item => item.el === el);\n        if (!container) return;\n        container.update(el, binding);\n    }\n    unbind(el, binding, vnode) {\n        const container = this._queue.find(item => item.el === el);\n        if (!container) return;\n        container.clear();\n        remove(this._queue, container);\n    }\n}\nconst defaultOptions = {\n    selector: 'img',\n    error: '',\n    loading: ''\n};\nclass LazyContainer {\n    constructor(el, binding, vnode, lazy) {\n        this.el = el;\n        this.vnode = vnode;\n        this.binding = binding;\n        this.options = {};\n        this.lazy = lazy;\n        this._queue = [];\n        this.update(el, binding);\n    }\n    update(el, binding) {\n        this.el = el;\n        this.options = assignDeep({}, defaultOptions, binding.value);\n        const imgs = this.getImgs();\n        imgs.forEach(el => {\n            this.lazy.add(el, assignDeep({}, this.binding, {\n                value: {\n                    src: el.getAttribute('data-src') || el.dataset.src,\n                    error: el.getAttribute('data-error') || el.dataset.error || this.options.error,\n                    loading: el.getAttribute('data-loading') || el.dataset.loading || this.options.loading\n                }\n            }), this.vnode);\n        });\n    }\n    getImgs() {\n        return Array.from(this.el.querySelectorAll(this.options.selector));\n    }\n    clear() {\n        const imgs = this.getImgs();\n        imgs.forEach(el => this.lazy.remove(el));\n        this.vnode = null;\n        this.binding = null;\n        this.lazy = null;\n    }\n}\n\nvar LazyImage = (lazy => {\n    return defineComponent({\n        setup(props, { slots }) {\n            const el = ref();\n            const options = reactive({\n                src: '',\n                error: '',\n                loading: '',\n                attempt: lazy.options.attempt\n            });\n            const state = reactive({\n                loaded: false,\n                error: false,\n                attempt: 0\n            });\n            const { rect, checkInView } = useCheckInView(el, lazy.options.preLoad);\n            const renderSrc = ref('');\n            const load = (onFinish = noop) => {\n                if (state.attempt > options.attempt - 1 && state.error) {\n                    if (!lazy.options.silent) console.log(`VueLazyload log: ${options.src} tried too more than ${options.attempt} times`);\n                    return onFinish();\n                }\n                const src = options.src;\n                loadImageAsync({ src }, ({ src }) => {\n                    renderSrc.value = src;\n                    state.loaded = true;\n                }, () => {\n                    state.attempt++;\n                    renderSrc.value = options.error;\n                    state.error = true;\n                });\n            };\n            const vm = computed(() => {\n                return {\n                    el: el.value,\n                    rect,\n                    checkInView,\n                    load,\n                    state\n                };\n            });\n            onMounted(() => {\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            });\n            onUnmounted(() => {\n                lazy.removeComponent(vm.value);\n            });\n            const init = () => {\n                const { src, loading, error } = lazy._valueFormatter(props.src);\n                state.loaded = false;\n                options.src = src;\n                options.error = error;\n                options.loading = loading;\n                renderSrc.value = options.loading;\n            };\n            watch(() => props.src, () => {\n                init();\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            }, {\n                immediate: true\n            });\n            return () => {\n                var _a;\n                return createVNode(props.tag || 'img', {\n                    src: renderSrc.value,\n                    ref: el\n                }, [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n            };\n        }\n    });\n});\n\nvar index = {\n    /*\r\n    * install function\r\n    * @param  {Vue} Vue\r\n    * @param  {object} options lazyload options\r\n    */\n    install(Vue, options = {}) {\n        const lazy = new Lazy(options);\n        const lazyContainer = new LazyContainerMananger(lazy);\n        const vueVersion = Number(Vue.version.split('.')[0]);\n        if (vueVersion < 3) return new Error('Vue version at least 3.0');\n        Vue.config.globalProperties.$Lazyload = lazy;\n        Vue.provide('Lazyload', lazy);\n        if (options.lazyComponent) {\n            Vue.component('lazy-component', LazyComponent(lazy));\n        }\n        if (options.lazyImage) {\n            Vue.component('lazy-image', LazyImage(lazy));\n        }\n        Vue.directive('lazy', {\n            beforeMount: lazy.add.bind(lazy),\n            beforeUpdate: lazy.update.bind(lazy),\n            updated: lazy.lazyLoadHandler.bind(lazy),\n            unmounted: lazy.remove.bind(lazy)\n        });\n        Vue.directive('lazy-container', {\n            beforeMount: lazyContainer.bind.bind(lazyContainer),\n            updated: lazyContainer.update.bind(lazyContainer),\n            unmounted: lazyContainer.unbind.bind(lazyContainer)\n        });\n    }\n};\n\nexport { index as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}