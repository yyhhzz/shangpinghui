{"ast":null,"code":"import { mapState } from \"vuex\";\nimport throttle from \"lodash/throttle\";\nexport default {\n  name: \"TypeNav\",\n\n  // 组件挂载完毕，向服务器发送请求\n  data() {\n    return {\n      currentIndex: -1,\n      show: true // 默认显示\n\n    };\n  },\n\n  mounted() {\n    //路由切换的时候,路由组件会被销毁重建【子组件不也是】\n    if (this.$route.path != \"/home\") {\n      this.show = false;\n    }\n  },\n\n  computed: { ...mapState({\n      categoryList: state => state.home.categoryList\n    })\n  },\n  methods: {\n    // 三级联动节流 throttle\n    enterHandle: throttle(function (index) {\n      this.currentIndex = index;\n    }, 10),\n\n    leaveHandle() {\n      this.currentIndex = -1;\n\n      if (this.$route.path != \"/home\") {\n        this.show = false;\n      }\n    },\n\n    goSearch(event) {\n      let targetNode = event.target;\n      let {\n        categoryname,\n        category1id,\n        category2id,\n        category3id\n      } = targetNode.dataset;\n\n      if (categoryname) {\n        // var locations = {\n        //   name: \"search\",\n        //   query: { categoryName: categoryname },\n        // };\n        let location = {\n          name: \"search\"\n        };\n        let query = {\n          categoryName: categoryname\n        };\n\n        if (category1id) {\n          query.category1Id = category1id;\n        } else if (category2id) {\n          query.category2Id = category2id;\n        } else {\n          query.category3Id = category3id;\n        } //判断：如果路由跳转的时候，带有params参数，捎带脚传递过去\n\n\n        if (this.$route.params) {\n          location.params = this.$route.params; //动态给location配置对象添加query属性\n\n          location.query = query; //路由跳转\n\n          this.$router.push(location);\n        } // //点击商品分类按钮的时候,如果路径当中携带params参数,需要合并携带给search模块\n        // if (this.$route.params.keyword) {\n        //   locations.params = this.$route.params;\n        // }\n        // //目前商品分类这里携带参数只有query参数\n        //   this.$router.push(location);\n\n      }\n    },\n\n    changeShow() {\n      if (this.$route.path != \"/home\") {\n        this.show = true;\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}